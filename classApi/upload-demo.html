<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
  </head>
  <body>
    <div></div>

    <div>
      <input
        type="file"
        class="form-control"
        id="file"
        placeholder="請輸入圖片連結"
      />
    </div>

    <script>
      const url = "https://vue3-course-api.hexschool.io/v2"; // 請加入站點
      const path = "lucky_herb_spices"; // 請加入個人 API Path

      const fileInput = document.querySelector("#file");

      fileInput.addEventListener("change", upload);

      function upload() {
        const token = document.cookie
          .split("; ")
          .find((row) => row.startsWith("hexToken="))
          ?.split("=")[1];
        // console.log(document.cookie, token);
        axios.defaults.headers.common["Authorization"] = token;

        // #1 撰寫上傳的 API 事件
        console.dir(fileInput);
        const file = fileInput.files[0];
        console.log(file);

        const formData = new FormData();
        formData.append("file-to-upload", file);

        axios
          .post(`${url}/api/${path}/admin/upload`, formData)
          .then((res) => {
            console.log(res);
            alert(res.data);
          })
          .catch((err) => {
            console.dir(err);
            alert(err.response.data.message);
          });
      }
    </script>
  </body>
</html>

<!-- "https://storage.googleapis.com/vue-course-api.appspot.com/lucky_herb_spices/1705370155335.jpeg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=M9Wd%2FElW%2BIe2yx8LmDOujcxeC4yRJT2UnfXAgOZ%2FYJaYrTEr354b48mWSA57hpvadNh55m9SUk2wu71WoTwduC%2BY7rhHQO2qL%2BEM1%2BCcqGq3UHGALc9Lb%2FeJMREWSnpTWZ8I85dTgeQXvp2r0ugXPiP88gSiev0LgY%2FTLG1hOuCIbyzi4A%2Flo2LxI5qPvmm4b3jrtEHye5j1%2FfPE4mLWzC1SmZShUGEZnTq0ETuocYiibin9xtuBw884DGocuYPD2prVqGYlgNX9DebIgBD1PAaxy5%2BGL1acHCM5sH%2F9P94Ax1os3xY8YD2URDacDt%2FVv9dEfbvJ%2FJer86slnp85DQ%3D%3D" -->
